/* Reset base per il container principale */
.gpt-helper-result {
  all: revert;
  position: fixed !important;
  top: 20px !important;
  right: 20px !important;
  width: 30vw !important;
  min-width: 300px !important;
  min-height: 200px !important;
  max-height: 80vh !important;
  background: #ffffff !important;
  border: 1px solid rgba(0, 0, 0, 0.1) !important;
  border-radius: 8px !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
  z-index: 2147483647 !important;
  margin: 0 !important;
  padding: 0 !important;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif !important;
  font-size: 14px !important;
  line-height: 1.4 !important;
  color: #333333 !important;
  box-sizing: border-box !important;
  display: flex !important;
  flex-direction: column !important;
  resize: both !important;
  overflow: hidden !important;
}

/* Reset per tutti gli elementi interni */
.gpt-helper-result * {
  all: revert;
  box-sizing: border-box !important;
  font-family: inherit !important;
  line-height: inherit !important;
}

/* Barra superiore con drag handle */
.gpt-helper-draghandle {
  padding: 12px 16px !important;
  background: #f8f9fa !important;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1) !important;
  border-radius: 8px 8px 0 0 !important;
  cursor: move !important;
  display: flex !important;
  justify-content: space-between !important;
  align-items: center !important;
  user-select: none !important;
  margin: 0 !important;
}

/* Titolo nella barra superiore */
.gpt-helper-title {
  font-weight: 600 !important;
  color: #1a1a1a !important;
  font-size: 14px !important;
  margin: 0 !important;
  padding: 0 !important;
}

/* Pulsante di chiusura */
.gpt-helper-close {
  background: none !important;
  border: none !important;
  cursor: pointer !important;
  font-size: 18px !important;
  color: #666666 !important;
  padding: 4px 8px !important;
  border-radius: 4px !important;
  margin: 0 !important;
  line-height: 1 !important;
}

.gpt-helper-close:hover {
  background: rgba(0, 0, 0, 0.05) !important;
  color: #333333 !important;
}

/* Contenuto principale */
.gpt-helper-content {
  flex: 1 1 auto !important;
  padding: 16px !important;
  overflow-y: auto !important;
  background: #ffffff !important;
  margin: 0 !important;
}

/* Sezioni di contenuto */
.gpt-helper-section {
  margin: 0 0 16px 0 !important;
  padding: 0 !important;
}

.gpt-helper-section:last-child {
  margin-bottom: 0 !important;
}

/* Titoli delle sezioni */
.gpt-helper-section h4 {
  margin: 0 0 8px 0 !important;
  padding: 0 !important;
  font-weight: 600 !important;
  color: #1a1a1a !important;
  font-size: 13px !important;
}

/* Box di testo */
.gpt-helper-text {
  background: #f8f9fa !important;
  padding: 12px !important;
  border-radius: 6px !important;
  border: 1px solid rgba(0, 0, 0, 0.1) !important;
  white-space: pre-wrap !important;
  word-wrap: break-word !important;
  overflow-wrap: break-word !important;
  color: #333333 !important;
  font-size: 13px !important;
  margin: 0 !important;
  line-height: 1.5 !important;
}

/* Barra delle azioni */
.gpt-helper-actions {
  padding: 12px 16px !important;
  border-top: 1px solid rgba(0, 0, 0, 0.1) !important;
  display: flex !important;
  align-items: center !important;
  gap: 10px !important;
  background: #ffffff !important;
  border-radius: 0 0 8px 8px !important;
  margin: 0 !important;
}

/* Pulsante di azione principale */
.gpt-helper-button {
  padding: 8px 16px !important;
  background: #4CAF50 !important;
  color: #ffffff !important;
  border: none !important;
  border-radius: 4px !important;
  cursor: pointer !important;
  font-size: 13px !important;
  font-weight: 500 !important;
  transition: background-color 0.2s ease !important;
  margin: 0 !important;
}

.gpt-helper-button:hover {
  background: #45a049 !important;
}

/* Chat button */
.gpt-helper-button.chat {
  background: #2196F3 !important;
  margin-left: auto !important;
}

.gpt-helper-button.chat:hover {
  background: #1976D2 !important;
}

.gpt-helper-button.send {
  background: #2196F3 !important;
  margin-left: 8px !important;
}

.gpt-helper-button.send:hover {
  background: #1976D2 !important;
}

/* Chat interface */
.gpt-helper-chat {
  display: none !important;
  margin-top: 16px !important;
  border-top: 1px solid rgba(0, 0, 0, 0.1) !important;
  padding-top: 16px !important;
}

.gpt-helper-chat.active {
  display: block !important;
}

.gpt-helper-chat-input {
  display: flex !important;
  gap: 8px !important;
  align-items: flex-start !important;
}

.gpt-helper-textarea {
  flex: 1 !important;
  min-height: 60px !important;
  max-height: 200px !important;
  padding: 8px !important;
  border: 1px solid rgba(0, 0, 0, 0.1) !important;
  border-radius: 4px !important;
  resize: vertical !important;
  font-family: inherit !important;
  font-size: 13px !important;
  line-height: 1.5 !important;
  background: #ffffff !important;
  color: #333333 !important;
}

.gpt-helper-textarea:focus {
  outline: none !important;
  border-color: #2196F3 !important;
  box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.1) !important;
}

/* Stato pulsante copiato */
.gpt-helper-button.copied {
  background: #45a049 !important;
  pointer-events: none !important;
}

/* Angolo di ridimensionamento */
.gpt-helper-result::after {
  content: '' !important;
  position: absolute !important;
  bottom: 0 !important;
  right: 0 !important;
  width: 15px !important;
  height: 15px !important;
  cursor: se-resize !important;
  background: linear-gradient(135deg, transparent 50%, rgba(0, 0, 0, 0.1) 50%) !important;
  border-radius: 0 0 8px 0 !important;
  pointer-events: none !important;
}

/* Scrollbar personalizzata */
.gpt-helper-content::-webkit-scrollbar {
  width: 8px !important;
}

.gpt-helper-content::-webkit-scrollbar-track {
  background: #f1f1f1 !important;
  border-radius: 4px !important;
}

.gpt-helper-content::-webkit-scrollbar-thumb {
  background: #c1c1c1 !important;
  border-radius: 4px !important;
}

.gpt-helper-content::-webkit-scrollbar-thumb:hover {
  background: #a8a8a8 !important;
}

/* Stili per il loading state */
.gpt-helper-loading {
  text-align: center !important;
  padding: 20px !important;
}

.gpt-helper-spinner {
  width: 40px !important;
  height: 40px !important;
  border: 3px solid #f3f3f3 !important;
  border-top: 3px solid #4CAF50 !important;
  border-radius: 50% !important;
  animation: spin 1s linear infinite !important;
  margin: 0 auto 16px auto !important;
}

.gpt-helper-loading-text {
  color: #666666 !important;
  font-size: 14px !important;
  margin-top: 8px !important;
}

.gpt-helper-loading-subtext {
  color: #888888 !important;
  font-size: 12px !important;
  margin-top: 4px !important;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Dark Mode */
@media (prefers-color-scheme: dark) {
  .gpt-helper-result {
    background: #2d2d2d !important;
    border-color: rgba(255, 255, 255, 0.1) !important;
    color: #e0e0e0 !important;
  }

  .gpt-helper-draghandle {
    background: #383838 !important;
    border-bottom-color: rgba(255, 255, 255, 0.1) !important;
  }

  .gpt-helper-title {
    color: #e0e0e0 !important;
  }

  .gpt-helper-close {
    color: #a0a0a0 !important;
  }

  .gpt-helper-close:hover {
    background: rgba(255, 255, 255, 0.1) !important;
    color: #ffffff !important;
  }

  .gpt-helper-content {
    background: #2d2d2d !important;
  }

  .gpt-helper-section h4 {
    color: #e0e0e0 !important;
  }

  .gpt-helper-text {
    background: #383838 !important;
    border-color: rgba(255, 255, 255, 0.1) !important;
    color: #e0e0e0 !important;
  }

  .gpt-helper-actions {
    background: #2d2d2d !important;
    border-top-color: rgba(255, 255, 255, 0.1) !important;
  }

  .gpt-helper-button {
    background: #43a047 !important;
  }

  .gpt-helper-button:hover {
    background: #388e3c !important;
  }

  .gpt-helper-button.copied {
    background: #388e3c !important;
  }

  .gpt-helper-button.chat,
  .gpt-helper-button.send {
    background: #1976D2 !important;
  }

  .gpt-helper-button.chat:hover,
  .gpt-helper-button.send:hover {
    background: #1565C0 !important;
  }

  .gpt-helper-spinner {
    border-color: #444444 !important;
    border-top-color: #4CAF50 !important;
  }

  .gpt-helper-loading-text {
    color: #a0a0a0 !important;
  }

  .gpt-helper-loading-subtext {
    color: #808080 !important;
  }

  .gpt-helper-content::-webkit-scrollbar-track {
    background: #383838 !important;
  }

  .gpt-helper-content::-webkit-scrollbar-thumb {
    background: #666666 !important;
  }

  .gpt-helper-content::-webkit-scrollbar-thumb:hover {
    background: #777777 !important;
  }

  .gpt-helper-result::after {
    background: linear-gradient(135deg, transparent 50%, rgba(255, 255, 255, 0.1) 50%) !important;
  }

  .gpt-helper-chat {
    border-top-color: rgba(255, 255, 255, 0.1) !important;
  }

  .gpt-helper-textarea {
    background: #383838 !important;
    border-color: rgba(255, 255, 255, 0.1) !important;
    color: #e0e0e0 !important;
  }

  .gpt-helper-textarea:focus {
    border-color: #1976D2 !important;
    box-shadow: 0 0 0 2px rgba(25, 118, 210, 0.1) !important;
  }
}